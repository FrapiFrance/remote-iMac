<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <meta name="theme-color" content="#003366" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="icon" href="/icon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="css/ytremote.css" />

    <!-- Font Awesome (Free) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      referrerpolicy="no-referrer"
    />

    <title>remote iMac</title>
  </head>

  <body>
    <div class="page">

      <!-- =============== MUSIC  =============== -->
        <div class="now">
          <button class="playlist-btn" id="playlistBtn" type="button" onclick="uiTogglePlaylists()">
            <i class="fa-solid fa-layer-group"></i>
            <span id="playlist">—</span>
            <i class="fa-solid fa-chevron-down"></i>
          </button>

          <div class="title">
            <span id="track">Aucune piste</span>
          </div>
          <div class="artist" id="artist">—</div>
        </div>

        <div class="now now-compact">
          <div class="title title-compact">
            <span class="pill">
              <i class="fa-regular fa-clock"></i>
            </span>
            <span id="posLabel">—:— / —:—</span>
          </div>

          <input
            id="pos"
            type="range"
            min="0"
            max="100"
            value="0"
            class="slider"
            oninput="queueSeek(this.value)"
          />
        </div>

        <!-- One control row (6 icons) -->
        <div class="controls-row">
          <button class="btn-icon btn-md" onclick="send('/api/previous')" aria-label="Précédent" type="button">
            <i class="fa-solid fa-backward-step"></i>
          </button>

          <button class="btn-icon btn-lg btn-primary" onclick="send('/api/play-pause')" aria-label="Lecture / Pause" type="button">
            <i class="fa-solid fa-play"></i>
          </button>

          <button class="btn-icon btn-md" onclick="send('/api/next')" aria-label="Suivant" type="button">
            <i class="fa-solid fa-forward-step"></i>
          </button>

          <button class="btn-icon btn-sm btn-secondary off" onclick="send('/api/shuffle'); this.classList.remove('off')" aria-label="Aléatoire" type="button" id="btnShuffle">
            <i class="fa-solid fa-shuffle"></i>
          </button>

          <button class="btn-icon btn-sm btn-secondary off" onclick="toggleRepeat()" aria-label="Aléatoire" type="button" id="btnRepeat">
            <i class="fa-solid fa-repeat"></i>
          </button>

          <button class="btn-icon btn-sm btn-secondary" onclick="uiToggleQueue()" aria-label="File de lecture" type="button">
            <i class="fa-solid fa-list"></i>
          </button>
        </div>

        <div class="now now-compact">
          <div class="title title-compact">
            <span class="pill pill-btn" id="muteBtn" onclick="send('/api/mute-toggle')">
              <i id="volIcon" class="fa-solid fa-volume-high"></i>
            </span>
            <span id="volLabel">—%</span>
          </div>

          <input
            id="vol"
            type="range"
            min="0"
            max="100"
            value="50"
            class="slider"
            oninput="queueVolume(this.value)"
          />
        </div>


        <!-- Playlists overlay (hidden by default; JS later) -->
        <div class="overlay" id="plOverlay" aria-hidden="true">
        <div class="overlay-card">
          <div class="overlay-head">
            <div class="overlay-title">
              <i class="fa-solid fa-layer-group"></i> <span>Playlists</span>
            </div>
            <button class="btn-close" type="button" onclick="uiTogglePlaylists()" aria-label="Fermer">
              <i class="fa-solid fa-xmark"></i>
            </button>
          </div>

          <div class="plist" id="plist"></div>

          <div class="overlay-hint">
            Sélectionne une playlist • la playlist active est surlignée
          </div>
        </div>
      </div>
      <div class="overlay" id="qOverlay" aria-hidden="true">
      <!-- Queue overlay (hidden by default; JS later) -->
      <div class="overlay-card">
        <div class="overlay-head">
          <div class="overlay-title">
            <i class="fa-solid fa-list"></i> <span>File de lecture</span>
          </div>
          <button class="btn-close" type="button" onclick="uiToggleQueue()" aria-label="Fermer">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="qlist" id="qlist"></div>

        <div class="overlay-hint">
          Tap sur un morceau pour basculer dessus
        </div>
      </div>
    </div>



      <!-- =============== PHOTOS  =============== -->
        <div class="photos" id="photosSection" style="display: none;">
          <div class="photos-header">
            <div class="title">Photos</div>

            <button class="btn-alert" onclick="send('/api/photos-playsignal')" title="Signal" type="button" aria-label="Signal">
              <i class="fa-solid fa-triangle-exclamation"></i>
            </button>
          </div>

          <div class="grid-photos">
            <button class="btn-icon btn-md" onclick="send('/api/photos-prev')" aria-label="Photo précédente" type="button">
              <i class="fa-solid fa-backward-step"></i>
            </button>
            <button class="btn-icon btn-md" onclick="send('/api/photos-pause')" aria-label="Pause / Stop" type="button">
              <i class="fa-solid fa-pause"></i>
            </button>
            <button class="btn-icon btn-md" onclick="send('/api/photos-next')" aria-label="Photo suivante" type="button">
              <i class="fa-solid fa-forward-step"></i>
            </button>
          </div>
        </div>

      <div class="hint">
        <a href="mailto:frapi@centrale-lyon.org">Frapi</a> <a href="https://github.com/FrapiFrance/remote-iMac">remote iMac</a><br />
        installable<br />
        • iOS Safari : Partager → Sur l’écran d’accueil<br />
        • Android Chrome : Menu → Installer l’application
      </div>
    </div>

    <script src="js/ytremote.js"></script>
  </body>
</html>
