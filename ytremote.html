<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <meta name="theme-color" content="#003366" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="icon" href="/icon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="css/ytremote.css" />

    <!-- Font Awesome (Free) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      referrerpolicy="no-referrer"
    />

    <title>remote iMac</title>
  </head>

  <body>
    <div class="page">
      <!-- Tabs -->
      <div class="tabs" role="tablist" aria-label="remote-iMac tabs">
        <button
          class="tab active"
          role="tab"
          aria-selected="true"
          aria-controls="tab-music"
          id="tabbtn-music"
          onclick="uiShowTab('music')"
          type="button"
        >
          <i class="fa-solid fa-music"></i>
          <span>Musique</span>
        </button>

        <button
          class="tab"
          role="tab"
          aria-selected="false"
          aria-controls="tab-photos"
          id="tabbtn-photos"
          onclick="uiShowTab('photos')"
          type="button"
        >
          <i class="fa-solid fa-images"></i>
          <span>Photos</span>
        </button>
      </div>

      <!-- =============== MUSIC TAB =============== -->
      <section class="tab-panel active" id="tab-music" role="tabpanel" aria-labelledby="tabbtn-music">
        <div class="now">
          <div class="playlist" id="playlist"></div>
          <div class="title">
            <span id="track">Aucune piste</span>
          </div>
          <div class="artist" id="artist">—</div>
        </div>

        <div class="now now-compact">
          <div class="title title-compact">
            <span class="pill">
              <i class="fa-regular fa-clock"></i>
            </span>
            <span id="posLabel">—:— / —:—</span>
          </div>

          <input
            id="pos"
            type="range"
            min="0"
            max="100"
            value="0"
            class="slider"
            oninput="queueSeek(this.value)"
          />
        </div>

        <!-- One control row (6 icons) -->
        <div class="controls-row">
          <button class="btn-icon btn-md" onclick="send('/api/previous')" aria-label="Précédent" type="button">
            <i class="fa-solid fa-backward-step"></i>
          </button>

          <button class="btn-icon btn-lg btn-primary" onclick="send('/api/play-pause')" aria-label="Lecture / Pause" type="button">
            <i class="fa-solid fa-play"></i>
          </button>

          <button class="btn-icon btn-md" onclick="send('/api/next')" aria-label="Suivant" type="button">
            <i class="fa-solid fa-forward-step"></i>
          </button>

          <button class="btn-icon btn-sm" aria-label="Volume" type="button" id="btnVolume">
            <i class="fa-solid fa-volume-high"></i>
          </button>

          <button class="btn-icon btn-sm btn-secondary off" onclick="send('/api/shuffle'); this.classList.remove('off')" aria-label="Aléatoire" type="button" id="btnShuffle">
            <i class="fa-solid fa-shuffle"></i>
            <!-- quand chgt PlayList, penser à remettre off -->
          </button>

          <button class="btn-icon btn-sm btn-secondary off" onclick="toggleRepeat()" aria-label="Aléatoire" type="button" id="btnRepeat">
            <i class="fa-solid fa-repeat"></i>
          </button>

          <button class="btn-icon btn-sm btn-secondary" onclick="uiOpenQueue()" aria-label="File de lecture" type="button">
            <i class="fa-solid fa-list"></i>
          </button>
        </div>

        <!-- Volume overlay (hidden by default; JS later) -->
        <div class="overlay" id="volOverlay" aria-hidden="true">
          <div class="overlay-card">
            <div class="overlay-head">
              <div class="overlay-title">
                <i class="fa-solid fa-volume-high"></i> <span id="volLabel">—%</span>
              </div>
              <button class="btn-close" type="button" onclick="uiToggleVolume()" aria-label="Fermer">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>

            <input
              id="vol"
              type="range"
              min="0"
              max="100"
              value="50"
              class="slider"
              oninput="queueVolume(this.value)"
            />

            <div class="overlay-hint">
              Tap : afficher/masquer • 0 : mute
            </div>
          </div>
        </div>
      </section>

      <!-- =============== PHOTOS TAB =============== -->
      <section class="tab-panel" id="tab-photos" role="tabpanel" aria-labelledby="tabbtn-photos">
        <div class="photos">
          <div class="photos-header">
            <div class="photos-title">Photos</div>

            <button class="btn-alert" onclick="send('/api/photos-playsignal')" title="Signal" type="button" aria-label="Signal">
              <i class="fa-solid fa-triangle-exclamation"></i>
            </button>
          </div>

          <div class="grid-photos">
            <button onclick="send('/api/photos-prev')" aria-label="Photo précédente" type="button">
              <i class="fa-solid fa-backward-step"></i>
            </button>
            <button onclick="send('/api/photos-pause')" aria-label="Pause / Stop" type="button">
              <i class="fa-solid fa-pause"></i>
            </button>
            <button onclick="send('/api/photos-next')" aria-label="Photo suivante" type="button">
              <i class="fa-solid fa-forward-step"></i>
            </button>
          </div>
        </div>
      </section>

      <div class="hint">
        <a href="mailto:frapi@centrale-lyon.org">Frapi</a> <a href="https://github.com/FrapiFrance/remote-iMac">remote iMac</a><br />
        installable<br />
        • iOS Safari : Partager → Sur l’écran d’accueil<br />
        • Android Chrome : Menu → Installer l’application
      </div>
    </div>

    <script src="js/ytremote.js"></script>
  </body>
</html>
